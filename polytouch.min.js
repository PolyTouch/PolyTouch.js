/*!
 * PolyTouch 1.0.0
 * git://github.com/PolyTouch/PolyTouch.js.git
 *
 *
 * Copyright 2014 Adobe Systems Incorporated
 * Released under the Apache License v2
 *
 * Author: Damien Antipa
 * Date: 2014-07-07T14:03:15.789Z
 */
!function(a){a.polyTouch={ppcm:28},document.addEventListener("DOMContentLoaded",function(){var b=document.createElement("div");b.style.width="1cm";var c=document.getElementsByTagName("body")[0];c.appendChild(b);var d=document.defaultView.getComputedStyle(b,null).getPropertyValue("width");c.removeChild(b),a.polyTouch.ppcm=parseFloat(d)})}(window),function(a){var b={distance:function(a,b){return b-a},duration:function(a,b){return b-a}};a.math=b}(window.polyTouch),function(a){function b(a){this.id=a,this.events={}}var c=["altKey","bubbles","button","cancelable","ctrlKey","clientX","clientY","detail","fromElement","isPrimary","layerX","layerY","metaKey","offsetX","offsetY","pageX","pageY","pointerId","pointerType","pressure","relatedTarget","screenX","screenY","shiftKey","target","tiltX","tiltY","timeStamp","toElement","view","x","y"];b.prototype={_sanitizeEvent:function(a){for(var b,d={},e=0;e<c.length;e++)b=c[e],d[b]=a[b];return d},_add:function(a,b){var c=this._sanitizeEvent(b);return this.events[a].push(c),c},add:function(a){var b=a.type.substring(7);return this.events[b]=this.events[b]||[],this._add(b,a)},position:function(){return this.events.move?this.events.move[this.events.move.length-1]:this.events.down[0]},hasMoved:function(b,c){var d,e,f,g=c||this.events.down[0];if(this.events.move)for(var h=this.events.move.length-1;h>-1;h--)if(d=this.events.move[h],e=Math.abs(a.math.distance(g.x,d.x)/a.ppcm),f=Math.abs(a.math.distance(g.y,d.y)/a.ppcm),e>b||f>b)return!0;return!1}},a.Pointer=b}(window.polyTouch),function(a){function b(){this.keys=[],this.values={}}b.prototype={set:function(b,c){var d=this.keys.indexOf(b);return-1===d&&(this.keys.push(b),this.values[b]=new a.Pointer(b)),this.values[b].add(c)},get:function(a){return this.values[a]},remove:function(a){var b,c=this.keys.indexOf(a);return c>-1&&(b=this.values[a],this.keys.splice(c,1),delete this.values[a]),b},has:function(a){return this.keys.indexOf(a)>-1},clear:function(){for(var a=this.keys.length-1;a>-1;a--)delete this.values[this.keys[a]];this.keys.length=0}},a.PointerMap=b}(window.polyTouch),function(a){function b(a,b){var c,d,e=document.createEvent("Event"),f=b||{};e.initEvent(a,null!=f.bubbles?f.bubbles:!0,null!=f.cancelable?f.cancelable:!0),c=Object.keys(f);for(var g=0;g<c.length;g++)d=c[g],e[d]=f[d];return e}function c(){this._recognizer=[],this.pointer=new a.PointerMap,this._handleEvent=this._handleEvent.bind(this),document.addEventListener("pointerdown",this._handleEvent,!1),document.addEventListener("pointermove",this._handleEvent,!1),document.addEventListener("pointercancel",this._handleEvent,!1),document.addEventListener("pointerup",this._handleEvent,!1)}var d=["altKey","button","clientX","clientY","isPrimary","layerX","layerY","metaKey","offsetX","offsetY","pageX","pageY","pointerId","pointerType","pressure","screenX","screenY","shiftKey","target","tiltX","tiltY","view","x","y"];c.prototype={DEFAULT_PROPERTIES:d,_handleEvent:function(a){var b,c,d=a.type.substring(7);switch(d){case"down":b=this.pointer.set(a.pointerId,a);break;case"move":case"cancel":case"up":this.pointer.has(a.pointerId)&&(b=this.pointer.set(a.pointerId,a))}c=this.pointer.get(a.pointerId),b&&c&&this._dispatch(d,c,b,a),("cancel"===d||"up"===d)&&this.pointer.remove(a.pointerId)},_dispatch:function(a,b,c,d){for(var e,f=0;f<this._recognizer.length;f++)e=this._recognizer[f][a],e&&e.call(this._recognizer[f],b,c,d)},cloneProperties:function(a,b){for(var c,d={},e=0;e<b.length;e++)c=b[e],d[c]=a[c];return d},trigger:function(a,c,d){var e=b(c,d);a.dispatchEvent(e)},register:function(a){this._recognizer.push(a)},getPointerOnTarget:function(b){var c,d,e,f=[];for(e=this.pointer.keys.length-1;e>-1;e--)c=this.pointer.values[a.gesture.pointer.keys[e]],d=c.events.move||c.events.down,d[d.length-1].target===b&&f.push(c);return f}},a.gesture=new c}(window.polyTouch),function(a){var b=300,c=.5,d={cancel:this.up,up:function(d,e){var f,g=d.events.down[0];if(g){if(a.math.duration(g.timeStamp,e.timeStamp)>b||e.target!==g.target||a.gesture.getPointerOnTarget(g.target).length>1||d.hasMoved(c))return;f=a.gesture.cloneProperties(g,a.gesture.DEFAULT_PROPERTIES),a.gesture.trigger(e.target,"tap",f)}}};a.gesture.register(d)}(window.polyTouch),function(a){var b=600,c=.5,d={},e={down:function(a){d[a.id]=setTimeout(this.detect.bind(this,a.id),b)},up:function(a){var b=d[a.id];b&&(clearTimeout(b),delete d[a.id])},detect:function(b){var e,f,g=a.gesture.pointer.get(b);if(g){if(delete d[b],e=g.events.down[0],a.gesture.getPointerOnTarget(e.target).length>1||g.hasMoved(c))return;f=a.gesture.cloneProperties(e,a.gesture.DEFAULT_PROPERTIES),a.gesture.trigger(e.target,"hold",f)}}};a.gesture.register(e)}(window.polyTouch),function(a){function b(a,b){return(Math.sqrt(Math.pow(b[0].x-b[1].x,2)+Math.pow(b[0].y-b[1].y,2))/Math.sqrt(Math.pow(a[0].x-a[1].x,2)+Math.pow(a[0].y-a[1].y,2))).toFixed(2)}function c(a,b){return(180*Math.atan2(b[0].y-b[1].y,b[0].x-b[1].x)/Math.PI-180*Math.atan2(a[0].y-a[1].y,a[0].x-a[1].x)/Math.PI).toFixed(2)}var d=["altKey","metaKey","pointerType","shiftKey","target","view"],e=.25,f={},g={down:function(b,c){var d=a.gesture.getPointerOnTarget(c.target);2===d.length&&d[0].pointerType===d[1].pointerType&&(f[d[0].id]={start:d[0].position(),primary:!0,related:d[1].id,target:c.target,hasStarted:!1},f[d[1].id]={start:d[1].position(),related:d[0].id,target:c.target,hasStarted:!1})},move:function(g,h){var i,j,k,l,m,n=f[g.id];if(n){if(i=f[n.related],!n.hasStarted){if(!g.hasMoved(e,n.start))return;n.hasStarted=!0,i.hasStarted=!0,l=a.gesture.cloneProperties(h,a.gesture.DEFAULT_PROPERTIES),a.gesture.trigger(n.target,"pinchstart",l)}j=a.gesture.pointer.get(n.related),k=j.position(),m=n.primary?[[n.start,i.start],[h,k]]:[[i.start,n.start],[k,h]],l=a.gesture.cloneProperties(h,d),l.target=n.target,l.detail={scale:b.apply(this,m),rotation:c.apply(this,m)},a.gesture.trigger(n.target,"pinch",l)}},cancel:this.up,up:function(b,c){var d,e=f[b.id];e&&(e.hasStarted&&(d=a.gesture.cloneProperties(c,a.gesture.DEFAULT_PROPERTIES),a.gesture.trigger(e.target,"pinchend",d)),delete f[e.related],delete f[b.id])}};a.gesture.register(g)}(window.polyTouch);